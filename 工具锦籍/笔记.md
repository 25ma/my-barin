# Spring

- 手动回滚当前事务

  ```java
  TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
  ```
  
- 回滚事务到指定回滚点

  ```
  // 设置回滚点，
  Object savePoint = TransactionAspectSupport.currentTransactionStatus().createSavepoint();  
  
  // 回滚到savePoint事务点
  TransactionAspectSupport.currentTransactionStatus().rollbackToSavepoint(savePoint);
  ```

- 动态设置Rabbit Listener的监听队列

  利用SPEL表达式进行数据的注入

  ~~~java
  /**
   * RabbitMq配置信息
   * @author varg
   * @date 2020/8/9 14:46
   */
  @Component
  public class RabbitMqConfig {
  
      /**
       * 排版交换机
       */
      @Value("${queue:queue}")
      public String queue;
  
  }
  
  @Resource
  RabbitMqConfig rabbitMqConfig;
  
  @RabbitListener(queues = "#{rabbitMqConfig.queue}")
  ~~~

- Redis 和 Mysql 操作在同一个事务中，出现异常如何同时回滚这两个数据库的操作

  - Redis 的操作是否受 Spring 事务管理的控制？

# Git

- 暂存改动不提交

  git stash save

  git stash pop

- 多版本切换

  - 切换到某一个版本

    git reset --hard [version number]

  - 从当前版本切换回最新版本

    首先需要查看到最新版本的版本号

    git reflog 该命令可以查看执行过的git命令并记录相关版本号

    利用上一条命令切换到最新版本

# Lamba

| 类型         | 语法               | 对应的Lambda表达式                   |
| ------------ | ------------------ | ------------------------------------ |
| 静态方法引用 | 类名::staticMethod | (args) -> 类名.staticMethod(args)    |
| 实例方法引用 | inst::instMethod   | (args) -> inst.instMethod(args)      |
| 对象方法引用 | 类名::instMethod   | (inst,args) -> 类名.instMethod(args) |
| 构建方法引用 | 类名::new          | (args) -> new 类名(args)             |



# Mysql

- 数据库查询字段日期类型不传与传0两种方式数据查询时间相差很大

  

# 算法

![](https://varg-my-images.oss-cn-beijing.aliyuncs.com/img/20201110174742.png)



# Tool

- fastjson

  - 数组string转list

    ~~~java
    	List<DTO> result = JSON.parseObject("jsonstring", new TypeReference<List<DTO>>() {});
    ~~~

    

# Windows常用命令

- 查看端口占用情况

    ~~~
    netstat -ano |findstr "端口号"
    ~~~

- 通过进程 ID 查询进程信息

    ~~~
    tasklist |findstr "进程id号"
    ~~~

- 杀死进程

    ~~~
    taskkill /f /t /im "进程id或者进程名称"
    ~~~

# Mac常用命令

- 软件授权

	~~~
	sudo xattr -rd com.apple.quarantine 空格 软件的路径
	~~~

- 启动/停止应用
	~~~
	停止应用: launchctl unload /Library/LaunchAgents/com.paloaltonetworks.gp.pangp*
	
	停止应用且关闭自启动: launchctl unload -w /Library/LaunchAgents/com.paloaltonetworks.gp.pangp*
		
	启动应用: launchctl load /Library/LaunchAgents/com.paloaltonetworks.gp.pangp*
	
	启动应用且开启自启动: launchctl load -w /Library/LaunchAgents/com.paloaltonetworks.gp.pangp*
	
	~~~
